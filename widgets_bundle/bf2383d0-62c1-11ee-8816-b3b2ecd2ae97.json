{
  "entityType" : "WIDGETS_BUNDLE",
  "entity" : {
    "alias" : "test",
    "description" : null,
    "externalId" : null,
    "id" : {
      "entityType" : "WIDGETS_BUNDLE",
      "id" : "bf2383d0-62c1-11ee-8816-b3b2ecd2ae97"
    },
    "image" : null,
    "name" : "test",
    "title" : "test"
  },
  "widgets" : [ {
    "alias" : "test",
    "name" : "test",
    "image" : null,
    "description" : null,
    "descriptor" : {
      "type" : "static",
      "sizeX" : 7.5,
      "sizeY" : 3,
      "resources" : [ ],
      "templateHtml" : "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\" />\r\n    <link rel=\"stylesheet\" href=\"https://use.fontawesome.com/releases/v5.5.0/css/all.css\" integrity=\"sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU\" crossorigin=\"anonymous\" />\r\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"></script>\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css\" />\r\n    <link rel=\"stylesheet\" href=\"style.css\" />\r\n    <script type=\"text/javascript\" src=\"https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.js\"></script>\r\n    <style>\r\n        /* Add your custom CSS styles here */\r\n        body,\r\n        html {\r\n            height: 100%;\r\n            margin: 0;\r\n            background: #7F7FD5;\r\n            background: -webkit-linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5);\r\n            background: linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5);\r\n        }\r\n\r\n        .chat {\r\n            margin-top: auto;\r\n            margin-bottom: auto;\r\n        }\r\n\r\n        .card {\r\n            height: 500px;\r\n            border-radius: 15px !important;\r\n            background-color: rgba(0, 0, 0, 0.4) !important;\r\n        }\r\n\r\n        .contacts_body {\r\n            padding: 0.75rem 0 !important;\r\n            overflow-y: auto;\r\n            white-space: nowrap;\r\n        }\r\n\r\n        .contacts li {\r\n            /* Gaya elemen <li> Anda di sini */\r\n            transition: background-color 0.3s ease;\r\n            /* Animasi perubahan warna latar belakang */\r\n        }\r\n\r\n        /* Gaya saat elemen di-hover */\r\n        .contacts li:hover {\r\n            background-color: #666;\r\n            /* Ganti dengan warna yang lebih gelap sesuai keinginan Anda */\r\n        }\r\n\r\n        .msg_card_body {\r\n            overflow-y: auto;\r\n        }\r\n\r\n        .card-header {\r\n            border-radius: 15px 15px 0 0 !important;\r\n            border-bottom: 0 !important;\r\n        }\r\n\r\n        .card-footer {\r\n            border-radius: 0 0 15px 15px !important;\r\n            border-top: 0 !important;\r\n        }\r\n\r\n        .container {\r\n            align-content: center;\r\n        }\r\n\r\n        .search {\r\n            border-radius: 15px 0 0 15px !important;\r\n            background-color: rgba(0, 0, 0, 0.3) !important;\r\n            border: 0 !important;\r\n            color: white !important;\r\n        }\r\n\r\n        .search:focus {\r\n            box-shadow: none !important;\r\n            outline: 0px !important;\r\n        }\r\n\r\n        .type_msg {\r\n            background-color: rgba(0, 0, 0, 0.3) !important;\r\n            border: 0 !important;\r\n            color: white !important;\r\n            height: 60px !important;\r\n            overflow-y: auto;\r\n        }\r\n\r\n        .type_msg:focus {\r\n            box-shadow: none !important;\r\n            outline: 0px !important;\r\n        }\r\n\r\n        .attach_btn {\r\n            border-radius: 15px 0 0 15px !important;\r\n            background-color: rgba(0, 0, 0, 0.3) !important;\r\n            border: 0 !important;\r\n            color: white !important;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .send_btn {\r\n            border-radius: 0 15px 15px 0 !important;\r\n            background-color: rgba(0, 0, 0, 0.3) !important;\r\n            border: 0 !important;\r\n            color: white !important;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .search_btn {\r\n            border-radius: 0 15px 15px 0 !important;\r\n            background-color: rgba(0, 0, 0, 0.3) !important;\r\n            border: 0 !important;\r\n            color: white !important;\r\n            cursor: pointer;\r\n        }\r\n\r\n        .contacts {\r\n            list-style: none;\r\n            padding: 0;\r\n        }\r\n\r\n        .contacts li {\r\n            width: 100% !important;\r\n            padding: 5px 10px;\r\n            margin-bottom: 15px !important;\r\n        }\r\n\r\n        .active {\r\n            background-color: rgba(0, 0, 0, 0.3);\r\n        }\r\n\r\n        .user_img {\r\n            height: 70px;\r\n            width: 70px;\r\n            border: 1.5px solid #f5f6fa;\r\n\r\n        }\r\n\r\n        .user_img_msg {\r\n            height: 40px;\r\n            width: 40px;\r\n            border: 1.5px solid #f5f6fa;\r\n\r\n        }\r\n\r\n        .img_cont {\r\n            position: relative;\r\n            height: 70px;\r\n            width: 70px;\r\n        }\r\n\r\n        .img_cont_msg {\r\n            height: 40px;\r\n            width: 40px;\r\n        }\r\n\r\n        .online_icon {\r\n            position: absolute;\r\n            height: 15px;\r\n            width: 15px;\r\n            background-color: #4cd137;\r\n            border-radius: 50%;\r\n            bottom: 0.2em;\r\n            right: 0.4em;\r\n            border: 1.5px solid white;\r\n        }\r\n\r\n        .offline {\r\n            background-color: #c23616 !important;\r\n        }\r\n\r\n        .user_info {\r\n            margin-top: auto;\r\n            margin-bottom: auto;\r\n            margin-left: 15px;\r\n        }\r\n\r\n        .user_info span {\r\n            font-size: 20px;\r\n            color: white;\r\n        }\r\n\r\n        .user_info p {\r\n            font-size: 10px;\r\n            color: rgba(255, 255, 255, 0.6);\r\n        }\r\n\r\n        .video_cam {\r\n            margin-left: 50px;\r\n            margin-top: 5px;\r\n        }\r\n\r\n        .video_cam span {\r\n            color: white;\r\n            font-size: 20px;\r\n            cursor: pointer;\r\n            margin-right: 20px;\r\n        }\r\n\r\n        .msg_cotainer {\r\n            margin-top: auto;\r\n            margin-bottom: auto;\r\n            margin-left: 10px;\r\n            border-radius: 25px;\r\n            background-color: #82ccdd;\r\n            padding: 10px;\r\n            position: relative;\r\n        }\r\n\r\n        .msg_cotainer_send {\r\n            margin-top: auto;\r\n            margin-bottom: auto;\r\n            margin-right: 10px;\r\n            border-radius: 25px;\r\n            background-color: #78e08f;\r\n            padding: 10px;\r\n            position: relative;\r\n        }\r\n\r\n        .msg_time {\r\n            position: absolute;\r\n            left: 0;\r\n            bottom: -15px;\r\n            color: rgba(255, 255, 255, 0.5);\r\n            font-size: 10px;\r\n        }\r\n\r\n        .msg_time_send {\r\n            position: absolute;\r\n            right: 0;\r\n            bottom: -15px;\r\n            color: rgba(255, 255, 255, 0.5);\r\n            font-size: 10px;\r\n        }\r\n\r\n        .msg_head {\r\n            position: relative;\r\n        }\r\n\r\n        @media(max-width: 576px) {\r\n            .contacts_card {\r\n                margin-bottom: 15px !important;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n\r\n\r\n<body>\r\n    <div class=\"container-fluid h-100\">\r\n        <div class=\"row justify-content-center h-100\">\r\n            <div class=\"col-md-4 col-xl-3 chat\">\r\n                <div class=\"card mb-sm-3 mb-md-0 contacts_card\">\r\n                    <div class=\"card-header\">\r\n                        <div class=\"input-group\">\r\n                            <input type=\"text\" placeholder=\"Search...\" name=\"\" class=\"form-control search\" />\r\n                            <div class=\"input-group-prepend\">\r\n                                <span class=\"input-group-text search_btn\"><i class=\"fas fa-search\"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"card-body contacts_body\">\r\n                        <ul class=\"contacts\" id=\"contact-list\"></ul>\r\n                    </div>\r\n                    <div class=\"card-footer\"></div>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-md-8 col-xl-6 chat\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header msg_head\">\r\n                        <div class=\"d-flex bd-highlight\">\r\n                            <div class=\"img_cont\">\r\n                                <img src=\"https://static.turbosquid.com/Preview/001292/481/WV/_D.jpg\" class=\"rounded-circle user_img\" id=\"selected-user-image\" alt=\"user image\" />\r\n                                <span id=\"online-status\" class=\"online_icon\"></span>\r\n                            </div>\r\n                            <div class=\"user_info\">\r\n                                <span id=\"selected-username\">Chat with Khalid</span>\r\n                                <p id=\"selected-total-message\">1767 Messages</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"card-body msg_card_body\" id=\"message-container\">\r\n                        <div id=\"illustration-container\" style=\"text-align: center\">\r\n                            <img src=\"data:image/png;base64,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\" alt=\"No Message Selected Illustration\" style=\"max-width: 200px; height: auto; border-radius: 50%\" />\r\n                            <h1 style=\"font-size: 24px; margin-top: 20px; color: #ffffff\">\r\n                                No Message Selected\r\n                            </h1>\r\n                            <p style=\"font-size: 16px; color: #ffffff\">\r\n                                Please select a message to start chatting.\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"card-footer\">\r\n                        <div class=\"input-group\">\r\n                            <div class=\"input-group-append\">\r\n                                <span class=\"input-group-text attach_btn\"><i class=\"fas fa-paperclip\"></i></span>\r\n                            </div>\r\n                            <textarea id=\"input-message\" name=\"\" class=\"form-control type_msg\" placeholder=\"Type your message...\"></textarea>\r\n                            <div class=\"input-group-append\">\r\n                                <span id=\"send-msg-btn\" class=\"input-group-text send_btn\"><i class=\"fas fa-location-arrow\"></i></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!--<h4>Click expand to chat</h4>-->\r\n    <!--<div class=\"chat-container\" id=\"chatMessages\">-->\r\n    <!-- Chat messages will be displayed here -->\r\n    <!--</div>-->\r\n\r\n    <!--<div class=\"input-container\">-->\r\n    <!--    <input type=\"text\" class=\"message-input\" id=\"messageInput\" placeholder=\"Type a message...\" />-->\r\n    <!--    <button id=\"sendButton\">Send</button>-->\r\n    <!--</div>-->\r\n    <!--<script src=\"https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js\"></script>-->\r\n    <!--<script src=\"https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js\"></script>-->\r\n\r\n    <script type=\"module\">\r\n        import {\r\n            initializeApp\r\n        } from \"https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js\";\r\n        import {\r\n            getFirestore,\r\n            collection,\r\n            addDoc,\r\n            query,\r\n            orderBy,\r\n            onSnapshot,\r\n            doc,\r\n            updateDoc\r\n        } from \"https://www.gstatic.com/firebasejs/10.4.0/firebase-firestore.js\";\r\n        const firebaseConfig = {\r\n            apiKey: \"AIzaSyBk8MGay_f4fuJCod4J-DoTPbPOIndQ0Do\",\r\n            authDomain: \"vlrs-publisher.firebaseapp.com\",\r\n            projectId: \"vlrs-publisher\",\r\n            storageBucket: \"vlrs-publisher.appspot.com\",\r\n            messagingSenderId: \"245332307014\",\r\n            appId: \"1:245332307014:web:e251ea7c43d4a697f0ee47\",\r\n        };\r\n\r\n        const app = initializeApp(firebaseConfig);\r\n        const db = getFirestore(app);\r\n        const chatCollection = collection(db, \"chats\");\r\n        const chatQuery = query(chatCollection);\r\n        var noChatSelected = true;\r\n        var chatMessages = [];\r\n        const adminName = \"Bus Operator\";\r\n        let selectedId = \"\";\r\n        let selecteUsername = \"\";\r\n\r\n        var usernameSelected = document.getElementById(\"selected-username\");\r\n        var imgSelected = document.getElementById(\"selected-user-image\");\r\n        var totalMsg = document.getElementById(\"selected-total-message\");\r\n        var onlineStatus = document.getElementById(\"online-status\");\r\n        const contactList = document.getElementById(\"contact-list\");\r\n        const inputMsg = document.getElementById(\"input-message\");\r\n        const sendMsgButton = document.getElementById(\"send-msg-btn\");\r\n\r\n        const unsubscribe = onSnapshot(chatQuery, (querySnapshot) => {\r\n            contactList.innerHTML = \"\";\r\n            querySnapshot.forEach((doc) => {\r\n                const listItem = document.createElement(\"li\");\r\n                const userData = doc.data();\r\n                const lastSeen = formatTimestampToAgoOrLastSeen(userData.lastSeen);\r\n                chatMessages = userData.chats;\r\n                listItem.innerHTML = `\r\n            <div class=\"d-flex bd-highlight\">\r\n                <div class=\"img_cont\">\r\n                    <img src=\"${\r\n                      userData.imgSrc\r\n                    }\" class=\"rounded-circle user_img\">\r\n                    <span class=\"online_icon\"></span>\r\n                </div>\r\n                <div class=\"user_info\">\r\n                    <span>${userData.name}</span>\r\n                    <p>${userData.onlineStatus ? \"Online\" : lastSeen}</p>\r\n                </div>\r\n            </div>\r\n        `;\r\n                listItem.addEventListener(\"click\", function() {\r\n                    chatMessages = userData.chats;\r\n                    usernameSelected.innerHTML = \"Chat with \" + userData.name;\r\n                    imgSelected.src = userData.imgSrc;\r\n                    selectedId = userData.id;\r\n                    selecteUsername = userData.name;\r\n                    totalMsg.innerHTML = userData.chats.length + \" messages\";\r\n                    noChatSelected = false;\r\n                    if (!userData.onlineStatus) {\r\n                        onlineStatus.classList.remove(\"online_icon\");\r\n                        onlineStatus.classList.add(\"offline\");\r\n                    }\r\n                    changeSelectedChat(userData.imgSrc, userData.name);\r\n                });\r\n                contactList.appendChild(listItem);\r\n            });\r\n        });\r\n\r\n        sendMsgButton.addEventListener(\"click\", sendMessage);\r\n\r\n        function sendMessage() {\r\n            const docRef = doc(db, \"chats\", selectedId);\r\n            const msgText = inputMsg.value;\r\n            const chatsField = {\r\n                message: msgText,\r\n                sender: selecteUsername,\r\n                timestamp: new Date()\r\n            }\r\n            chatMessages.push(chatsField);\r\n            updateDoc(docRef, {\r\n                chats: chatMessages\r\n            });\r\n            inputMsg.value = \"\";\r\n        }\r\n\r\n        function changeSelectedChat(imgSrc, selectedUser) {\r\n            const noChatSelectedDiv = document.getElementById(\"illustration-container\");\r\n            if (noChatSelectedDiv !== null) {\r\n                noChatSelectedDiv.remove();\r\n            }\r\n            const messageContainer = document.getElementById(\"message-container\");\r\n            const unsubscribe = onSnapshot(chatQuery, (querySnapshot) => {\r\n                    messageContainer.innerHTML = \"\";\r\n                    querySnapshot.forEach((doc) => {\r\n                        const data = doc.data();\r\n                        if (data.id === selectedId) {\r\n                            const msgContent = data.chats;\r\n                            msgContent.forEach((data) => {\r\n                                const messageDiv = document.createElement(\"div\");\r\n                                const state = data.sender === adminName;\r\n                                messageDiv.className = `d-flex justify-content-${\r\n      state ? \"start\" : \"end\"\r\n    } mb-4`;\r\n\r\n                                messageDiv.innerHTML =\r\n                                    state ?\r\n                                    `\r\n        <div class=\"img_cont_msg\">\r\n            <img src=\"${imgSrc}\" class=\"rounded-circle user_img_msg\">\r\n        </div>\r\n        <div class=\"msg_cotainer${state ? \"\" : \"_send\"}\">\r\n            ${data.message}\r\n            <span class=\"msg_time${state ? \"\" : \"_send\"}\">${\r\n            data.timestamp.toDate().toLocaleTimeString([], {\r\n              hour: \"2-digit\",\r\n              minute: \"2-digit\",\r\n            })\r\n          }</span>\r\n        </div>\r\n        ` :\r\n                                    `\r\n        <div class=\"msg_cotainer${state ? \"\" : \"_send\"}\">\r\n            ${data.message}\r\n            <span class=\"msg_time${state ? \"\" : \"_send\"}\">${\r\n            data.timestamp.toDate().toLocaleTimeString([], {\r\n              hour: \"2-digit\",\r\n              minute: \"2-digit\",\r\n            })\r\n          }</span>\r\n        </div>\r\n        <div class=\"img_cont_msg\">\r\n            <img src=\"${imgSrc}\" class=\"rounded-circle user_img_msg\">\r\n        </div>\r\n        `;\r\n\r\n                                messageContainer.appendChild(messageDiv);\r\n                            });\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n\r\n            function formatTimestampToAgoOrLastSeen(firestoreTimestamp) {\r\n                const jsDate = firestoreTimestamp.toDate();\r\n\r\n                const currentTime = new Date().getTime();\r\n                const timeDifference = currentTime - jsDate.getTime();\r\n\r\n                const minutesAgo = Math.floor(timeDifference / (1000 * 60));\r\n\r\n                if (minutesAgo < 1) {\r\n                    return \"Just now\";\r\n                } else if (minutesAgo < 60) {\r\n                    return `${minutesAgo} minutes ago`;\r\n                } else {\r\n                    const lastSeenTime = jsDate.toLocaleTimeString([], {\r\n                        hour: \"2-digit\",\r\n                        minute: \"2-digit\",\r\n                    });\r\n                    return `Last seen at ${lastSeenTime}`;\r\n                }\r\n            }\r\n    </script>\r\n</body>\r\n\r\n</html>",
      "templateCss" : "",
      "controllerScript" : "self.onInit = function() {\n    var $injector = self.ctx.$scope.$injector;\n    var utils = $injector.get(self.ctx.servicesMap.get('utils'));\n\n    var cssParser = new cssjs();\n    cssParser.testMode = false;\n    var namespace = 'html-card-' + hashCode(self.ctx.settings.cardCss);\n    cssParser.cssPreviewNamespace = namespace;\n    cssParser.createStyleElement(namespace, self.ctx.settings.cardCss);\n    self.ctx.$container.addClass(namespace);\n    var evtFnPrefix = 'htmlCard_' + Math.abs(hashCode(self.ctx.settings.cardCss + self.ctx.settings.cardHtml + self.ctx.widget.id));\n    cardHtml =  '<div style=\"height:100%\" onclick=\"' + evtFnPrefix + '_onClickFn(event)\">' + \n                self.ctx.settings.cardHtml + \n                '</div>';\n    cardHtml = replaceCustomTranslations(cardHtml);\n    self.ctx.$container.html(cardHtml);\n\n    window[evtFnPrefix + '_onClickFn'] = function (event) {\n        self.ctx.actionsApi.elementClick(event);\n    }\n\n    function hashCode(str) {\n        var hash = 0;\n        var i, char;\n        if (str.length === 0) return hash;\n        for (i = 0; i < str.length; i++) {\n            char = str.charCodeAt(i);\n            hash = ((hash << 5) - hash) + char;\n            hash = hash & hash;\n        }\n        return hash;\n    }\n    \n    function replaceCustomTranslations (pattern) {\n        var customTranslationRegex = new RegExp('{i18n:[^{}]+}', 'g');\n        pattern = pattern.replace(customTranslationRegex, getTranslationText);\n        return pattern;\n    }\n    \n    function getTranslationText (variable) {\n        return utils.customTranslation(variable, variable);\n        \n    }\n}\n\nself.actionSources = function() {\n    return {\n        'elementClick': {\n            name: 'widget-action.element-click',\n            multiple: true\n        }\n    };\n}\n\nself.onDestroy = function() {\n}\n",
      "settingsSchema" : "",
      "dataKeySettingsSchema" : "",
      "settingsDirective" : "tb-html-card-widget-settings",
      "defaultConfig" : "{\"datasources\":[{\"type\":\"static\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.15479322438769105,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":false,\"backgroundColor\":\"rgb(255, 255, 255)\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{\"cardHtml\":\"<div class='card'>HTML code here</div>\",\"cardCss\":\".card {\\n    font-weight: bold;\\n    font-size: 32px;\\n    color: #999;\\n    width: 100%;\\n    height: 100%;\\n    display: flex;\\n    align-items: center;\\n    justify-content: center;\\n}\"},\"title\":\"test\",\"dropShadow\":true}"
    },
    "bundleAlias" : "test",
    "createdTime" : 1696429521054,
    "id" : {
      "entityType" : "WIDGET_TYPE",
      "id" : "d964dbe0-62c1-11ee-8816-b3b2ecd2ae97"
    },
    "tenantId" : {
      "entityType" : "TENANT",
      "id" : "3ffc4020-4196-11ee-969d-5b2424a9a3ad"
    }
  } ],
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}